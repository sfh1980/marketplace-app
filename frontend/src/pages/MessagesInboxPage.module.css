/**
 * Messages Inbox Page Styles
 * 
 * This stylesheet demonstrates inbox UI patterns and unread badge styling.
 * 
 * Key Patterns:
 * 1. Conversation List: Clean, scannable list of conversations
 * 2. Unread Badges: Prominent visual indicators for unread messages
 * 3. Hover States: Interactive feedback for clickable items
 * 4. Avatar Display: Circular profile pictures with fallback
 * 5. Message Preview: Truncated text with proper spacing
 * 
 * Educational Focus:
 * - Badge positioning (absolute positioning within relative container)
 * - Visual hierarchy (bold text for unread, muted for read)
 * - Hover effects (subtle background change, cursor pointer)
 * - Flexbox for layout (align items, space between)
 * - Color usage (semantic colors for unread indicators)
 */

/* Container */
.container {
  max-width: 800px;
  margin: 0 auto;
  padding: var(--space-xl);
}

/* Header */
.header {
  margin-bottom: var(--space-xl);
}

.title {
  font-size: var(--font-size-3xl);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-primary);
  margin: 0 0 var(--space-xs) 0;
}

.subtitle {
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  margin: 0;
}

/* Loading State */
.loadingState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xl);
  gap: var(--space-md);
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Error State */
.errorTitle {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-error);
  margin: 0 0 var(--space-md) 0;
}

.errorText {
  color: var(--color-text-secondary);
  margin: 0 0 var(--space-lg) 0;
}

/* Empty State */
.emptyState {
  text-align: center;
  padding: var(--space-2xl);
}

.emptyIcon {
  font-size: 4rem;
  margin-bottom: var(--space-lg);
}

.emptyState h2 {
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0 0 var(--space-md) 0;
}

.emptyState p {
  color: var(--color-text-secondary);
  margin: 0 0 var(--space-lg) 0;
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

/* Conversations Container */
.conversationsContainer {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

/* Conversation Card */
.conversationCard {
  cursor: pointer;
  transition: all var(--transition-fast);
  border-left: 3px solid transparent;
}

/**
 * Hover Effect
 * 
 * Subtle background change on hover provides feedback that item is clickable.
 * This is a standard pattern for interactive list items.
 */
.conversationCard:hover {
  background-color: var(--color-surface);
  border-left-color: var(--color-primary);
  transform: translateX(2px);
}

/**
 * Unread Conversation Styling
 * 
 * Conversations with unread messages get:
 * - Thicker left border in primary color
 * - Slightly different background
 * - This draws attention to conversations needing action
 */
.conversationCard.hasUnread {
  border-left-color: var(--color-primary);
  border-left-width: 4px;
}

/* Conversation Content */
.conversationContent {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
}

/* Avatar Container */
/**
 * Avatar Container with Badge
 * 
 * Position: relative allows the unread badge to be positioned absolutely
 * within this container. This is a common pattern for badges on avatars.
 */
.avatarContainer {
  position: relative;
  flex-shrink: 0;
}

/**
 * Avatar Styles
 * 
 * Circular profile picture with consistent sizing.
 * object-fit: cover ensures image fills circle without distortion.
 */
.avatar {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--color-border);
}

/**
 * Avatar Placeholder
 * 
 * When user has no profile picture, show their initial in a circle.
 * This is better UX than showing a generic icon.
 */
.avatarPlaceholder {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-bold);
  border: 2px solid var(--color-border);
}

/**
 * Unread Badge
 * 
 * This is a key UI pattern for messaging apps!
 * 
 * Position: absolute with top/right positioning places badge on avatar
 * Border-radius: 9999px creates perfect circle (pill shape)
 * Min-width ensures single digits are circular
 * Padding creates space around number
 * 
 * Color: Red/orange to draw attention (standard for notifications)
 * White text for contrast
 * Box-shadow for depth and visibility
 * 
 * Best Practices:
 * - Always position badges consistently (top-right is standard)
 * - Use contrasting colors (red on blue, white text on red)
 * - Make badges large enough to read but not overwhelming
 * - Show count number for clarity (not just a dot)
 */
.unreadBadge {
  position: absolute;
  top: -4px;
  right: -4px;
  background-color: var(--color-error);
  color: white;
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-bold);
  min-width: 20px;
  height: 20px;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 var(--space-xs);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  border: 2px solid white;
}

/* Conversation Details */
.conversationDetails {
  flex: 1;
  min-width: 0; /* Allows text truncation to work */
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

/* Conversation Header */
.conversationHeader {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: var(--space-md);
}

/**
 * Username Styling
 * 
 * Bold font weight makes username stand out.
 * This helps users quickly scan their conversations.
 */
.username {
  font-size: var(--font-size-lg);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/**
 * Timestamp Styling
 * 
 * Smaller, muted text for timestamp.
 * This creates visual hierarchy - username is primary, time is secondary.
 */
.timestamp {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  white-space: nowrap;
  flex-shrink: 0;
}

/* Message Preview */
/**
 * Message Preview Styling
 * 
 * Shows last message content as preview.
 * Truncation handled by JavaScript (see truncateMessage function).
 * 
 * Color: Muted for read messages, darker for unread
 * This visual distinction helps users identify new messages.
 */
.messagePreview {
  font-size: var(--font-size-base);
  color: var(--color-text-secondary);
  margin: 0;
  line-height: var(--line-height-normal);
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
}

/**
 * Unread Message Preview
 * 
 * Unread messages are shown in darker color and bold font.
 * This makes them stand out and draws user's attention.
 */
.messagePreview.unreadPreview {
  color: var(--color-text-primary);
  font-weight: var(--font-weight-medium);
}

/**
 * "You:" Prefix
 * 
 * When current user sent the last message, show "You:" prefix.
 * This helps users understand conversation context at a glance.
 */
.youPrefix {
  color: var(--color-text-secondary);
  font-weight: var(--font-weight-normal);
}

/* Listing Info */
/**
 * Associated Listing Display
 * 
 * If conversation is about a specific listing, show listing info.
 * This provides context for the conversation.
 */
.listingInfo {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  padding: var(--space-xs) var(--space-sm);
  background-color: var(--color-surface);
  border-radius: var(--radius-sm);
  width: fit-content;
}

.listingIcon {
  font-size: var(--font-size-base);
}

.listingTitle {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

/* Chevron Icon */
/**
 * Chevron (Arrow) Icon
 * 
 * Visual indicator that item is clickable and will navigate.
 * Standard pattern in mobile and web interfaces.
 */
.chevron {
  color: var(--color-text-secondary);
  flex-shrink: 0;
  transition: transform var(--transition-fast);
}

.conversationCard:hover .chevron {
  transform: translateX(4px);
  color: var(--color-primary);
}

/* Responsive Design */
/**
 * Mobile Optimization
 * 
 * On smaller screens:
 * - Reduce padding
 * - Smaller avatars
 * - Adjust font sizes
 * - Stack elements if needed
 */
@media (max-width: 768px) {
  .container {
    padding: var(--space-md);
  }
  
  .avatar,
  .avatarPlaceholder {
    width: 48px;
    height: 48px;
  }
  
  .username {
    font-size: var(--font-size-base);
  }
  
  .messagePreview {
    font-size: var(--font-size-sm);
  }
  
  .conversationContent {
    padding: var(--space-sm);
  }
}

@media (max-width: 480px) {
  .title {
    font-size: var(--font-size-2xl);
  }
  
  .avatar,
  .avatarPlaceholder {
    width: 40px;
    height: 40px;
  }
  
  .unreadBadge {
    min-width: 18px;
    height: 18px;
    font-size: 10px;
  }
  
  .listingInfo {
    display: none; /* Hide on very small screens to save space */
  }
}
